(()=>{function t(t,e,n){return Math.max(e,Math.min(n,t))}function e(){f.dpr=t(window.devicePixelRatio||1,1,2),f.w=Math.floor(window.innerWidth*f.dpr),f.h=Math.floor(window.innerHeight*f.dpr),u.width=f.w,u.height=f.h}function n(t){return Math.floor(t/f.cell)*f.cell}function o(t,e){return t+Math.random()*(e-t)}function a(t){return(t+o(-80,80)+360)%360}function i(t,e,i){const r=n(t),s=n(e),c=`${r},${s}`,h=a(.04*i%360),l=92,d=o(55,70);f.tiles.set(c,{cx:r,cy:s,born:i,hue:h,sat:l,light:d,size:f.cell*o(.85,1.05)})}function r(t,e,n,a){const r=performance.now(),s=n-t,c=a-e,h=Math.hypot(s,c),l=Math.max(1,Math.min(10,Math.floor(h/14)));for(let n=0;n<l;n++){const a=1===l?1:(n+1)/l,h=t+s*a,d=e+c*a;for(let t=0;t<f.stampsPerMove;t++){const e=o(0,2*Math.PI),n=Math.sqrt(Math.random())*f.radius;i(h+Math.cos(e)*n,d+Math.sin(e)*n,r+t)}}}function s(t){if("mouse"!==t.pointerType)return;const e=t.clientX,n=t.clientY;f.last?r(f.last.x,f.last.y,e,n):r(e,n,e,n),f.last={x:e,y:n}}function c(e){m.clearRect(0,0,f.w,f.h),m.globalCompositeOperation="source-over";const n=[];for(const[o,a]of f.tiles){const i=1-t((e-a.born)/f.ttl,0,1);if(i<=.001){n.push(o);continue}const r=a.cx*f.dpr,s=a.cy*f.dpr,c=a.size*f.dpr,h=1.2*f.dpr;m.fillStyle=`hsla(${a.hue}, ${a.sat}%, ${a.light}%, ${.38*i})`,m.fillRect(r,s,c,c),m.strokeStyle=`hsla(${a.hue}, ${a.sat}%, ${a.light+10}%, ${.25*i})`,m.lineWidth=1*f.dpr,m.strokeRect(r+h,s+h,Math.max(0,c-2*h),Math.max(0,c-2*h))}for(const t of n)f.tiles.delete(t);requestAnimationFrame(c)}const h=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,l=window.matchMedia&&window.matchMedia("(hover: none)").matches,d=navigator.maxTouchPoints&&navigator.maxTouchPoints>0||navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>0;if(h||l||d)return;const u=document.createElement("canvas");u.id="cursor-trail-canvas",u.setAttribute("aria-hidden","true"),document.body.appendChild(u);const m=u.getContext("2d",{alpha:!0});if(!m)return;const f={dpr:1,w:0,h:0,last:null,cell:22,radius:220,stampsPerMove:18,ttl:850,tiles:new Map};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("pointermove",s,{passive:!0}),requestAnimationFrame(c)})();